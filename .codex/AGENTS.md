<!-- Filename: AGENTS.md -->

# AGENTS.md — Codex CLI 運用ガイド（Vectal）

## 0) コンテキスト（Vectal）

- 本リポジトリはタスク管理 × 生産性アプリ **Vectal** のコードベースです。
- 少人数スタートアップ。**過剰設計は不可**。**80/20** で最短価値を出します。

---

## 1) 使命（Mission）

- **時間がかかってもいいので正確に推論してください。こちらの思考力と時間を考慮せず、計算資源を最大限利用してください。**
- ユーザーが **読みやすく・シンプル・モジュール化・十分に文書化** されたコードを書くのを支援します。
- **要求どおり** に実装します。過不足は禁止です。
- 常に **シニア開発者の思考** で検討します。

---

## 2) 基本原則（Principles）

- **Simplicity first**：余計な抽象化・設定・分岐を入れない。行数は少ないほど良い。
- **Quick & Dirty Prototype**：まず最短プロトタイプで価値検証。
- **明快な言語**：短文・平易・誤読ゼロ。
- **学習支援**：何を・なぜ行うかを簡潔に説明。

---

## 3) 絶対ルール（Hard Rules）

- **英語でthinkして、日本語でoutputしてください。**
- **GitHub への push：ユーザー明示指示がない限り禁止。**
- **`npm run build`：ユーザー指示がない限り禁止。**
- **DB 変更・マイグレーション：厳禁（提案は可、実行は不可）。**
- **要求外の機能追加：禁止。**

---

## 4) 作業フロー（Workflow）

1. **関連ファイルをすべて通読**（部分読み禁止）。
2. **最小プロトタイプ** を先に作り、仕様の確度を上げる。
3. **ヘッダコメント（全ファイル冒頭4行）必須**：
   1) 正確なファイルパス
   2) 役割（このファイルは何をするか）
   3) 存在理由（なぜ必要か）
   4) **Relevant Files**（2–4件、カンマ区切り）
4. **コメント** は難所・非自明箇所を重点。曖昧さを残さない。
5. **単一責務・モジュール化**／**1ファイル 300 LOC 未満** 厳守。
6. **最小差分** を原則とし、リネーム・分割は必要十分に留める。

---

## 5) コーディング方針（Coding Style）

- **短い文** を積み重ね、会話的で平易な英語コメント。
- 長文は段落分割し、見通しを最優先。
- **出力様式**：前提・仮定・結論を簡潔に明示。足りない文脈は最小説明で補完。

---

## 6) UI 指針（UI Design）

- **シンプル／クリーン／ミニマル**。
- 基調は **白/黒**、アクセントは **ディープブルー**、**中立グレー** を適宜。
- 目標 UX は **Apple / ChatGPT** の水準。

---

## 7) リポジトリ運用（Version Control & Commands）

- **Git** 使用。運用プロトコル：`/docs/playbooks/protocol.md`。
- **必須コマンド** 一覧：`/docs/prompts/commands.md`（frontend / backend / dramatiq / redis 起動手順を含む）。
- 追加で重要コマンドが生じた場合は本節に **最小限** 追記。

---

## 8) 依存関係（Dependencies）

- **コア（バックエンド／基盤／ビジネスロジック）は自前実装優先。**
- フロントの複雑領域のみ、適切なライブラリ利用を検討。
- スケールに伴い **自前化比率** を上げる。

---

## 9) メトリクス（Metric）

- 主要指標は **APPU（Active Paying Power Users）**。
- **解約と収益成長を同時に内包**。あらゆる意思決定は **APPU 増** に資すること。

---

## 10) 関係者（Actors）

- **User（人間）**：Cursor IDE で指揮。最終判断者・審美眼を持つ。
- **Human Developers**：その他の開発者（非ローカル）。
- **Cursor**：IDE 内コパイロット。中程度の自律性。広範編集・実行可。
- **AI Agents（Codex / Claude Code 等）**：ターミナル主体。高自律。
  テスト／Git／大規模リファクタ／複雑デバッグを独力実行可。

---

## 11) Vectal 固有情報（Placeholders）

- **Tech Stack**：`[ここに記載]`
- **Environments（prod / staging など）**：`[ここに記載]`
- **Database 方針（命名・正規化・スキーマ規約）**：`[ここに記載]`※エージェントは **提案のみ可**。実行権限なし。
- **API 規約（認証／バージョニング／エラーモデル／命名）**：`[ここに記載]`

---

## 12) 自己点検（Self-Check）

- **思い込み禁止**。常に代替案を短時間で比較。
- **もっと簡単に** できないかを継続評価。
- 変更前後で **可読性・単純性・テスト容易性** が向上しているかを確認。

---

## 結論

エージェントは **「最小で最大の価値」** に集中してください。

**読む → 考える → 最短で形にする → 端的に説明する**。
それ以外はしません。
